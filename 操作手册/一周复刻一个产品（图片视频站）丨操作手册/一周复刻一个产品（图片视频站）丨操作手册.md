## **é›¶ã€è¯¾å‰å‡†å¤‡æ¸…å•**



### **1.1 è´¦å·å‡†å¤‡**



| è´¦å·                 | æ³¨å†Œåœ°å€                        | ç”¨é€”            | å¿…é¡»      |
| ------------------ | --------------------------- | ------------- | ------- |
| GitHub             | https://github.com          | ä»£ç æ‰˜ç®¡          | âœ…       |
| Google             | https://accounts.google.com | å…³è”ç™»å½•å„å¹³å°<br /> | âœ…<br /> |
| Vercel             | https://vercel.com          | ç½‘ç«™éƒ¨ç½²          | âœ…       |
| Supabase           | https://supabase.com        | æ•°æ®åº“           | âœ…       |
| Cloudflare         | https://cloudflare.com      | R2å­˜å‚¨ + åŸŸåè§£æ   | âœ…       |
| Claude Code        | https://claude.ai           | AI ç¼–ç¨‹         | âœ…       |
| Semrush/Similarweb | https://semrush.com         | ç«å“åˆ†æï¼ˆå¯é€‰ï¼‰      | âšª       |



> å»ºè®®ç”¨ Google è´¦å·ä¸€é”®æ³¨å†Œï¼Œçœå»éªŒè¯æ­¥éª¤ã€‚



### **1.2 å¼€å‘ç¯å¢ƒ**



| å·¥å…·            | ä¸‹è½½åœ°å€                          | ç‰ˆæœ¬è¦æ±‚      |
| ------------- | ----------------------------- | --------- |
| VSCode æˆ– Trae | https://code.visualstudio.com | æœ€æ–°ç‰ˆ       |
| Node.js       | https://nodejs.org            | v20+      |
| pnpm          | ç»ˆç«¯æ‰§è¡Œ `npm install -g pnpm`    | æœ€æ–°ç‰ˆ<br /> |
| Git           | https://git-scm.com           | æœ€æ–°ç‰ˆ       |



**æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸï¼š**

```bash
node -v    # åº”æ˜¾ç¤º v20.x.x
pnpm -v    # åº”æ˜¾ç¤ºç‰ˆæœ¬å·
git -v     # åº”æ˜¾ç¤ºç‰ˆæœ¬å·
```



### **1.3 Chrome æ’ä»¶**



| æ’ä»¶          | ç”¨é€”          | å®‰è£…åœ°å€                  |
| ----------- | ----------- | --------------------- |
| AITDK<br /> | SEOåˆ†æã€å…³é”®è¯æŸ¥çœ‹ | Chrome åº”ç”¨å•†åº—æœç´¢ "AITDK" |



### **1.4 è¯¾å‰å‡†å¤‡æ£€æŸ¥æ¸…å•**



| **æ£€æŸ¥é¡¹**                     |
| --------------------------- |
| â˜ GitHub è´¦å·å·²æ³¨å†Œ              |
| â˜ Google è´¦å·å·²æ³¨å†Œ              |
| â˜ Vercel è´¦å·å·²æ³¨å†Œï¼ˆç”¨ GitHub ç™»å½•ï¼‰ |
| â˜ VSCode/Trae å·²å®‰è£…           |
| â˜ Node.js v20+ å·²å®‰è£…          |
| â˜ pnpm å·²å®‰è£…                  |
| â˜ Git å·²å®‰è£…                   |
| â˜ AITDK æ’ä»¶å·²å®‰è£…               |

## 1.4 æŠ€æœ¯ç›¸å…³çš„åŸºç¡€

å½“ä½ åœ¨æµè§ˆå™¨é‡Œè¾“å…¥ä¸€ä¸ªç½‘å€å¹¶å›è½¦ï¼Œä»**ç”¨æˆ·è§†è§’åˆ°æŠ€æœ¯åº•å±‚**ï¼Œå¤§è‡´ä¼šç»å†ä¸‹é¢è¿™äº›æ­¥éª¤ï¼ˆæŒ‰å®é™…å‘ç”Ÿé¡ºåºç®€åŒ–è¯´æ˜ï¼‰ï¼š

***

### 1.4.1 æµè§ˆå™¨ä¾§å‘ç”Ÿçš„äº‹æƒ…

#### 1ï¸âƒ£ URL è§£æ

æµè§ˆå™¨å…ˆè§£æä½ è¾“å…¥çš„åœ°å€ï¼Œä¾‹å¦‚ï¼š

`https://www.example.com/path?x=1`

ä¼šæ‹†æˆï¼š

* åè®®ï¼š`https`

* åŸŸåï¼š`www.example.com`

* ç«¯å£ï¼š`443`ï¼ˆHTTPS é»˜è®¤ï¼‰

* è·¯å¾„ï¼š`/path`

* æŸ¥è¯¢å‚æ•°ï¼š`x=1`

***

#### 2ï¸âƒ£ æµè§ˆå™¨ç¼“å­˜æ£€æŸ¥

æµè§ˆå™¨ä¼šå…ˆçœ‹ï¼š

* **DNS ç¼“å­˜**

* **HTTP ç¼“å­˜ï¼ˆå¼ºç¼“å­˜ / åå•†ç¼“å­˜ï¼‰**

* **Service Worker ç¼“å­˜**

å¦‚æœå‘½ä¸­å¼ºç¼“å­˜ï¼Œ**ç”šè‡³ä¸ä¼šå‘è¯·æ±‚**ã€‚

***

### 1.4.2 DNS è§£æï¼ˆåŸŸå â†’ IPï¼‰

å¦‚æœæœ¬åœ°æ²¡æœ‰ç¼“å­˜ï¼š

* æŸ¥æµè§ˆå™¨ DNS ç¼“å­˜

* æŸ¥æ“ä½œç³»ç»Ÿ DNS ç¼“å­˜

* è¯·æ±‚æœ¬åœ° DNS æœåŠ¡å™¨ï¼ˆä¸€èˆ¬æ˜¯è¿è¥å•† / å…¬å…± DNSï¼‰

* é€’å½’æŸ¥è¯¢ï¼š

  * æ ¹ DNS

  * é¡¶çº§åŸŸ DNSï¼ˆ.comï¼‰

  * æƒå¨ DNS

æœ€ç»ˆå¾—åˆ° IPï¼Œä¾‹å¦‚ï¼š

`93.184.216.34`

> CDN åœºæ™¯ä¸‹ï¼Œè¿™ä¸€æ­¥ä¼šè¿”å›**ç¦»ä½ æœ€è¿‘çš„èŠ‚ç‚¹ IP**

***

### 1.4.3 å»ºç«‹ç½‘ç»œè¿æ¥

#### 3ï¸âƒ£ TCP ä¸‰æ¬¡æ¡æ‰‹

æµè§ˆå™¨ä¸æœåŠ¡å™¨å»ºç«‹ TCP è¿æ¥ï¼š

* å®¢æˆ·ç«¯ â†’ SYN

* æœåŠ¡å™¨ â†’ SYN + ACK

* å®¢æˆ·ç«¯ â†’ ACK

è¿æ¥å»ºç«‹å®Œæˆã€‚

***

#### 4ï¸âƒ£ TLS/SSL æ¡æ‰‹ï¼ˆHTTPSï¼‰

å¦‚æœæ˜¯ HTTPSï¼Œè¿˜ä¼šè¿›è¡Œï¼š

* è¯ä¹¦æ ¡éªŒï¼ˆCAï¼‰

* å¯†é’¥åå•†ï¼ˆRSA / ECDHEï¼‰

* å»ºç«‹åŠ å¯†é€šé“

> è¿™ä¸€æ­¥å†³å®šäº†â€œæ˜¯ä¸æ˜¯å®‰å…¨ç½‘ç«™â€

***

### 1.4.4 å‘é€ HTTP è¯·æ±‚

#### 5ï¸âƒ£ æ„é€  HTTP è¯·æ±‚

æµè§ˆå™¨å‘é€è¯·æ±‚ï¼Œä¾‹å¦‚ï¼š

`GET /path?x=1 HTTP/1.1
Host: www.example.com
User-Agent: Chrome`
`Cookie: xxx`
`Accept: text/html`

***

### 1.4.5 æœåŠ¡å™¨ä¾§å‘ç”Ÿçš„äº‹

#### 6ï¸âƒ£ æœåŠ¡å™¨æ¥æ”¶è¯·æ±‚

è¯·æ±‚é€šå¸¸ä¼šç»è¿‡ï¼š

1011. **CDNï¸ CDN / WAF**

1012. **è´Ÿè½½å‡è¡¡ï¼ˆNginx / SLBï¼‰**

1013. **Web æœåŠ¡å™¨ï¼ˆNginx / Apacheï¼‰**

1014. **åº”ç”¨æœåŠ¡ï¼ˆNode / Java / Python / PHPï¼‰**

***

#### 7ï¸âƒ£ åç«¯å¤„ç†

åç«¯å¯èƒ½ä¼šï¼š

* æ ¡éªŒæƒé™ / Cookie / Token

* è®¿é—®æ•°æ®åº“

* è°ƒç”¨ç¼“å­˜ï¼ˆRedisï¼‰

* è°ƒç”¨å…¶ä»–æœåŠ¡

* ç”Ÿæˆ HTML / JSON / æ–‡ä»¶æµ

***

#### 8ï¸âƒ£ è¿”å› HTTP å“åº”

æœåŠ¡å™¨è¿”å›å“åº”ï¼š

`HTTP/1.1 200 OK
Content-Type: text/html`
`Set-Cookie: xxx`

Body é‡Œæ˜¯ HTML / JSON / å›¾ç‰‡ / è§†é¢‘ç­‰ã€‚

***

### 1.4.6 æµè§ˆå™¨æ¸²æŸ“é¡µé¢ï¼ˆéå¸¸å…³é”®ï¼‰

#### 9ï¸âƒ£ HTML è§£æ

æµè§ˆå™¨ï¼š

* è§£æ HTML â†’ **DOM æ ‘**

* é‡åˆ° CSS â†’ ç”Ÿæˆ **CSSOM**

* åˆå¹¶æˆ **Render Tree**

***

#### ğŸ”Ÿ JS æ‰§è¡Œ

* JS å¯èƒ½ä¼šé˜»å¡æ¸²æŸ“

* ä¿®æ”¹ DOM / CSS

* å‘èµ·é¢å¤–è¯·æ±‚ï¼ˆAJAX / Fetchï¼‰

***

#### 1ï¸âƒ£1ï¸âƒ£ å¸ƒå±€ & ç»˜åˆ¶

* Layoutï¼ˆè®¡ç®—ä½ç½®ï¼‰

* Paintï¼ˆç»˜åˆ¶ï¼‰

* Compositeï¼ˆåˆæˆå›¾å±‚ï¼‰

* GPU æ¸²æŸ“

æœ€ç»ˆé¡µé¢æ˜¾ç¤ºå‡ºæ¥ã€‚

***

### 1.4.7 åç»­è¡Œä¸º

#### 1ï¸âƒ£2ï¸âƒ£ èµ„æºå¹¶è¡ŒåŠ è½½

HTML åŠ è½½å®Œæˆåï¼Œæµè§ˆå™¨ä¼šç»§ç»­è¯·æ±‚ï¼š

* JS

* CSS

* å›¾ç‰‡

* å­—ä½“

* è§†é¢‘

***

#### 1ï¸âƒ£3ï¸âƒ£ è¿æ¥å¤ç”¨ä¸ä¼˜åŒ–

* HTTP/2 å¤šè·¯å¤ç”¨

* Keep-Alive

* é¢„åŠ è½½ / é¢„è¿æ¥

***

### ä¸€å¥è¯æ€»ç»“ï¼ˆé¢è¯•ç‰ˆï¼‰

> **è®¿é—®ä¸€ä¸ªç½‘ç«™ï¼Œæœ¬è´¨æ˜¯ï¼šåŸŸåè§£æ â†’ å»ºç«‹å®‰å…¨è¿æ¥ â†’ å‘é€ HTTP è¯·æ±‚ â†’ æœåŠ¡å™¨å¤„ç† â†’ è¿”å›å“åº” â†’ æµè§ˆå™¨è§£æå¹¶æ¸²æŸ“é¡µé¢ã€‚**



***



## ä¸€ã€Z-Image äº§å“åˆ†æ

### 1. å…³é”®è¯åˆ†æ

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image.png)



![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-1.png)

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-2.png)

###

### 2. ç½‘ç«™æµé‡åˆ†æ

| ![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-3.png) | ![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-4.png) |
| -------------------------------------------- | -------------------------------------------- |

###



![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-5.png)



![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-6.png)

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-7.png)

### 3. ç½‘ç«™åŠŸèƒ½åˆ†æ



## **äºŒã€è„šæ‰‹æ¶å®‰è£…æŒ‡å—**



### **2.1 å…‹éš†é¡¹ç›®åˆ°æœ¬åœ°**

> <span style="color: rgb(216,57,49); background-color: inherit">å¦‚æœå…‹éš†å¤ªéº»çƒ¦ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä¿å­˜ä¸‹æ–¹å‹ç¼©æ–‡ä»¶</span>
>
>



**å…‹éš†æ“ä½œæ­¥éª¤ï¼š**

1. æ‰“å¼€ç»ˆç«¯ï¼ˆMac: Terminal / Windows: PowerShellï¼‰

2. è¿›å…¥ä½ æƒ³å­˜æ”¾é¡¹ç›®çš„ç›®å½•

3) æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
# Clone é¡¹ç›®ï¼ˆæ›¿æ¢ä¸ºå®é™…ä»“åº“åœ°å€ï¼‰
https://github.com/fuyunzhishang/ImagePrmoptTemplate/tree/main?tab=readme-ov-file

# è¿›å…¥é¡¹ç›®ç›®å½•
cd project-template
```



### **2.2 å®‰è£…ä¾èµ–**



```bash
# å®‰è£…é¡¹ç›®ä¾èµ–
pnpm install
```



> å¦‚æœæŠ¥é”™ï¼Œæ£€æŸ¥ Node.js ç‰ˆæœ¬æ˜¯å¦ä¸º v20+



### **2.3 åˆ›å»ºç¯å¢ƒå˜é‡æ–‡ä»¶**



```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡,æ–°å»ºæ¨¡æ¿æ–‡ä»¶
touch .env 
```



### **2.4 æœ¬åœ°è¿è¡Œ**



```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev
```



æˆåŠŸåï¼Œæ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:3000`



### **2.5 ç›®å½•ç»“æ„è¯´æ˜**



```plain&#x20;text
project-template/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/          # é¡µé¢è·¯ç”±
â”‚   â”œâ”€â”€ components/   # ç»„ä»¶
â”‚   â””â”€â”€ lib/          # å·¥å…·å‡½æ•°
â”œâ”€â”€ public/           # é™æ€èµ„æº
â”œâ”€â”€ .env.example      # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ package.json      # ä¾èµ–é…ç½®
â””â”€â”€ README.md         # é¡¹ç›®è¯´æ˜
```



### **2.6 å®‰è£…æ£€æŸ¥æ¸…å•**



| **æ£€æŸ¥é¡¹**                 |
| ----------------------- |
| â˜ é¡¹ç›®å·² Clone åˆ°æœ¬åœ°         |
| â˜ pnpm install æ‰§è¡ŒæˆåŠŸ     |
| â˜ .env.local æ–‡ä»¶å·²åˆ›å»º      |
| â˜ pnpm dev è¿è¡ŒæˆåŠŸ         |
| â˜ æµè§ˆå™¨èƒ½è®¿é—® localhost:3000 |



## **ä¸‰ã€ç¯å¢ƒå˜é‡é…ç½®è¯´æ˜**



### **3.1 ç¯å¢ƒå˜é‡åˆ—è¡¨**



```html
| å˜é‡å                        | ä½œç”¨                   | å¦‚ä½•è·å–                                          |
| ----------------------------- | ---------------------- | ------------------------------------------------- |
| DATABASE_URL                  | Supabase æ•°æ®åº“è¿æ¥    | Supabase é¡¹ç›®è®¾ç½® â†’ Database â†’ Connection string  |
| NEXT_PUBLIC_SUPABASE_URL      | Supabase é¡¹ç›® URL      | Supabase é¡¹ç›®è®¾ç½® â†’ API â†’ Project URL             |
| NEXT_PUBLIC_SUPABASE_ANON_KEY | Supabase åŒ¿åå¯†é’¥      | Supabase é¡¹ç›®è®¾ç½® â†’ API â†’ anon public             |
| GOOGLE_CLIENT_ID              | Google OAuth ID        | Google Cloud Console â†’ APIs â†’ Credentials         |
| GOOGLE_CLIENT_SECRET          | Google OAuth Secret    | åŒä¸Š                                              |
| R2_ACCESS_KEY_ID              | Cloudflare R2 è®¿é—®å¯†é’¥ | Cloudflare â†’ R2 â†’ ç®¡ç† R2 API ä»¤ç‰Œ                |
| R2_SECRET_ACCESS_KEY          | Cloudflare R2 ç§˜å¯†å¯†é’¥ | åŒä¸Š                                              |
| R2_BUCKET_NAME                | R2 å­˜å‚¨æ¡¶åç§°          | åˆ›å»ºå­˜å‚¨æ¡¶æ—¶è‡ªå®šä¹‰                                |
| R2_ENDPOINT                   | R2 ç«¯ç‚¹ URL            | Cloudflare R2 â†’ å­˜å‚¨æ¡¶ â†’ è®¾ç½® â†’ S3 API ç«¯ç‚¹       |
```



#### **ç¤ºä¾‹\`.env\` æ–‡ä»¶**



```html
# Required: NextAuth
AUTH_SECRET="your-secret-here"
AUTH_GOOGLE_ID="your-google-client-id"
AUTH_GOOGLE_SECRET="your-google-client-secret"

# Required: Supabase
SUPABASE_URL="your-supabase-url"
SUPABASE_ANON_KEY="your-supabase-anon-key"
SUPABASE_SERVICE_ROLE_KEY="your-service-role-key"

# Required: Cloudflare R2 Storage (for AI-generated images/videos)
STORAGE_ENDPOINT="https://your-account-id.r2.cloudflarestorage.com"
STORAGE_REGION="auto"
STORAGE_ACCESS_KEY="your-r2-access-key-id"
STORAGE_SECRET_KEY="your-r2-secret-access-key"
STORAGE_BUCKET="your-bucket-name"
STORAGE_DOMAIN=""  # Optional: custom domain

# Optional: AI Providers
EVOLINK_API_KEY="your-evolink-api-key"
EVOLINK_API_URL="https://api.evolink.ai"
```







***



## **å››ã€åŸŸåæ³¨å†ŒæŒ‡å—**



### **4.1 æ¨èå¹³å°**



| å¹³å°         | ç½‘å€                     | ç‰¹ç‚¹         |
| ---------- | ---------------------- | ---------- |
| Namecheap  | https://namecheap.com  | ä»·æ ¼ä¾¿å®œï¼Œç•Œé¢å‹å¥½  |
| Cloudflare | https://cloudflare.com | æˆæœ¬ä»·ï¼Œé€‚åˆé•¿æœŸæŒæœ‰ |
| GoDaddy    | https://godaddy.com    | çŸ¥ååº¦é«˜ï¼Œé¦–å¹´ä¼˜æƒ   |



### **4.2 åŸŸåé€‰æ‹©å»ºè®®**



* ç®€çŸ­æ˜“è®°

* åŒ…å«å…³é”®è¯ï¼ˆå¦‚äº§å“åã€åŠŸèƒ½è¯ï¼‰

* ä¼˜å…ˆé€‰æ‹© .comï¼Œå…¶æ¬¡ .ai / .io / .co

* é¿å…è¿å­—ç¬¦å’Œæ•°å­—



### **4.3 æ³¨å†Œæ­¥éª¤ï¼ˆä»¥ Namecheap ä¸ºä¾‹ï¼‰**



1. æ‰“å¼€ https://namecheap.com

2. åœ¨æœç´¢æ¡†è¾“å…¥æƒ³è¦çš„åŸŸå

3) é€‰æ‹©å¯ç”¨çš„åŸŸåï¼Œç‚¹å‡»ã€ŒAdd to cartã€

4) ç‚¹å‡»ã€ŒCheckoutã€

5. ç™»å½•/æ³¨å†Œè´¦å·

6. å®Œæˆæ”¯ä»˜

***



## **äº”ã€è´¦å·å‡†å¤‡æ¸…å•-é˜¶æ®µ2**



Day 2 ç›´æ’­å‰ï¼Œéœ€è¦å®Œæˆä»¥ä¸‹è´¦å·å‡†å¤‡ï¼š



### **5.1 Google Cloudï¼ˆOAuthï¼‰**



**æ“ä½œæ­¥éª¤ï¼š**

1. æ‰“å¼€ https://console.cloud.google.com

2. åˆ›å»ºæ–°é¡¹ç›®

3) å¯ç”¨ã€ŒGoogle+ APIã€å’Œã€ŒGoogle Identityã€

4) é…ç½® OAuth åŒæ„å±å¹•

5. åˆ›å»º OAuth 2.0 å‡­æ®

6. è®°å½• Client ID å’Œ Client Secret



### **5.2 Supabase**



**æ“ä½œæ­¥éª¤ï¼š**

1. æ‰“å¼€ https://supabase.com

2. ç”¨ GitHub ç™»å½•

3) åˆ›å»ºæ–°é¡¹ç›®

4) ç­‰å¾…é¡¹ç›®åˆå§‹åŒ–å®Œæˆ

5. è¿›å…¥é¡¹ç›®è®¾ç½® â†’ APIï¼Œè®°å½•ï¼š

   * Project URL

   * anon public key

6. è¿›å…¥é¡¹ç›®è®¾ç½® â†’ Databaseï¼Œè®°å½•ï¼š

   * Connection string



### **5.3 Cloudflare R2**



**æ“ä½œæ­¥éª¤ï¼š**

1. æ‰“å¼€ https://cloudflare.com

2. æ³¨å†Œ/ç™»å½•è´¦å·

3) å·¦ä¾§èœå•é€‰æ‹©ã€ŒR2ã€

4) åˆ›å»ºå­˜å‚¨æ¡¶ï¼ˆBucketï¼‰

5. åˆ›å»º API ä»¤ç‰Œï¼Œè®°å½•ï¼š

   * Access Key ID

   * Secret Access Key



### **5.4 æ¥å…¥Googleç™»å½•&#x20;**



#### 01 Supabaseæ§åˆ¶å°é…ç½®Google Providerçš„è¯¦ç»†æ­¥éª¤



##### 1. åˆ›å»ºå¹¶åˆå§‹åŒ–Supabaseé¡¹ç›®

* è®¿é—®Supabaseå®˜ç½‘ï¼Œç‚¹å‡»å³ä¸Šè§’ç»¿è‰²æŒ‰é’®ã€ŒStart your Projectã€ï¼Œè‹¥å·²ç™»å½•GitHubï¼Œå»ºè®®é€‰æ‹©ã€ŒContinue with Githubã€å¿«é€Ÿç™»å½•ã€‚

  ![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-8.png)



* è¾“å…¥é¡¹ç›®åç§°ã€æ•°æ®åº“å¯†ç ï¼Œç‚¹å‡»ã€ŒCreate new projectã€å®Œæˆåˆ›å»ºã€‚é¡¹ç›®ç”Ÿæˆåï¼Œå¤åˆ¶`anon key`ã€`service_role secret`å’Œ`Project URL`ï¼šæœ¬åœ°æµ‹è¯•éœ€æ›´æ–°åˆ°`.env.local`æ–‡ä»¶ï¼Œç”Ÿäº§ç¯å¢ƒåˆ™é…ç½®åˆ°Vercelç­‰éƒ¨ç½²å¹³å°çš„ç¯å¢ƒå˜é‡ä¸­ã€‚



* è‹¥åç»­éœ€è¦æ‰¾å›è¿™äº›ä¿¡æ¯ï¼Œå¯é€šè¿‡å·¦ä¾§ã€ŒProject Settingsã€â†’ã€ŒAPI Keysã€å¤åˆ¶å¯†é’¥ï¼Œã€ŒData APIã€å¤åˆ¶é¡¹ç›®URLã€‚



##### **2. åœ¨Supabaseä¸­å¯ç”¨Googleç™»å½•å¹¶è·å–Callback URL**



* è¿›å…¥Supabaseé¡¹ç›®æ§åˆ¶å°ï¼Œç‚¹å‡»å·¦ä¾§ã€ŒProject Settingsã€â†’ã€ŒAuthenticationã€â†’ã€ŒSign In / Providersã€ï¼Œæ‰¾åˆ°ã€ŒGoogleã€å¹¶ç‚¹å‡»å³ä¾§çš„ã€ŒDisabledã€è¿›å…¥é…ç½®é¡µé¢ã€‚



* å¼€å¯ã€ŒEnable Sign in with Googleã€ï¼Œæ­¤æ—¶é¡µé¢ä¼šæ˜¾ç¤ºCallback URLï¼ˆæ ¼å¼ç±»ä¼¼`https://<YOUR_PROJECT_REF>.supabase.co/auth/v1/callback`ï¼‰ï¼Œå¤åˆ¶è¯¥URLå¤‡ç”¨ã€‚



##### **3. é…ç½®Google Cloud Consoleè·å–Client IDå’ŒClient Secret**



* æ‰“å¼€Google Cloud Consoleï¼ˆhttps://console.cloud.google.com/ï¼‰ï¼Œç™»å½•ååˆ›å»ºæ–°é¡¹ç›®ï¼Œè¾“å…¥é¡¹ç›®åç§°å¹¶å®Œæˆåˆ›å»ºã€‚

* è¿›å…¥é¡¹ç›®çš„ã€ŒAPIs & Servicesã€â†’ã€ŒOAuth consent screenã€ï¼Œé€‰æ‹©ã€ŒExternalã€ç±»å‹ï¼Œå¡«å†™é¡¹ç›®åç§°ã€è”ç³»é‚®ç®±ç­‰ä¿¡æ¯å®Œæˆå“ç‰Œé…ç½®ã€‚

* ç‚¹å‡»ã€ŒCreate OAuth clientã€ï¼Œåº”ç”¨ç±»å‹é€‰æ‹©ã€ŒWeb Applicationã€ï¼š

  * ã€ŒAuthorized JavaScript originsã€ï¼šæœ¬åœ°æµ‹è¯•å¡«å†™`http://localhost:3000`ï¼Œç”Ÿäº§ç¯å¢ƒå¡«å†™ç½‘ç«™åŸŸåï¼ˆå¦‚`https://yourdomain.com`ï¼‰ï¼›

  * ã€ŒAuthorized redirect URIsã€ï¼šç²˜è´´ä¹‹å‰ä»Supabaseå¤åˆ¶çš„Callback URLã€‚

* åˆ›å»ºå®Œæˆåï¼Œå¤åˆ¶ç”Ÿæˆçš„Client IDå’ŒClient Secretï¼Œè‹¥åç»­ä¸¢å¤±ï¼Œå¯åœ¨ã€ŒAPIs & Servicesã€â†’ã€ŒCredentialsã€ä¸­ç¼–è¾‘OAuthå®¢æˆ·ç«¯æŸ¥çœ‹ã€‚



##### 4. å®ŒæˆSupabaseçš„Googleç™»å½•é…ç½®



å›åˆ°Supabaseçš„Googleç™»å½•é…ç½®é¡µé¢ï¼Œç²˜è´´Client IDå’ŒClient Secretï¼Œç‚¹å‡»ã€ŒSaveã€ä¿å­˜ï¼Œè‡³æ­¤Supabaseç«¯çš„Google Provideré…ç½®å®Œæˆã€‚



##### 3.1  å¸¸è§æŠ¥é”™è¡¨æ ¼

| æŠ¥é”™ä»£ç /ä¿¡æ¯                 | æŠ¥é”™åŸå›                                                                                                                                        | è§£å†³æ–¹æ³•                                                                                                                                                                                                                                              |
| ----------------------- | ------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `redirect_uri_mismatch` | Google Cloud Consoleä¸­é…ç½®çš„`Authorized redirect URIs`ä¸Supabaseçš„Callback URLä¸åŒ¹é…ï¼›æˆ–URLå­˜åœ¨å¤§å°å†™ã€æ–œæ ç­‰ç»†èŠ‚å·®å¼‚                                              | 1. æ£€æŸ¥Google Cloud Consoleçš„OAuthå®¢æˆ·ç«¯é…ç½®ï¼Œç¡®ä¿`Authorized redirect URIs`ä¸Supabaseçš„Callback URLå®Œå…¨ä¸€è‡´ï¼ˆåŒ…æ‹¬åè®®ã€åŸŸåã€è·¯å¾„ï¼‰ï¼›\<br><br /><br />2. ç¡®è®¤ç”Ÿäº§ç¯å¢ƒä½¿ç”¨çš„æ˜¯ç½‘ç«™åŸŸåçš„URIï¼Œæœ¬åœ°æµ‹è¯•ä½¿ç”¨`http://localhost:3000`ç›¸å…³çš„URI                                                                |
| `Invalid API key`       | 1. `.env.local`æˆ–éƒ¨ç½²å¹³å°çš„ç¯å¢ƒå˜é‡ä¸­`SUPABASE_ANON_KEY`å¡«å†™é”™è¯¯ï¼›\<br><br /><br />2. ç¯å¢ƒå˜é‡æœªæ­£ç¡®åŠ è½½ï¼›\<br><br /><br />3. ä½¿ç”¨äº†é”™è¯¯çš„å¯†é’¥ï¼ˆå¦‚service\_role keyè€Œéanon keyï¼‰ | 1. ç™»å½•Supabaseæ§åˆ¶å°ï¼Œåœ¨ã€ŒProject Settingsã€â†’ã€ŒAPI Keysã€ä¸­å¤åˆ¶æ­£ç¡®çš„`anon key`ï¼›\<br><br /><br />2. æ£€æŸ¥`.env.local`æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œä¸”`SUPABASE_ANON_KEY`å˜é‡åæ­£ç¡®ï¼›\<br><br /><br />3. éƒ¨ç½²å¹³å°ï¼ˆå¦‚Vercelï¼‰éœ€é‡æ–°é…ç½®ç¯å¢ƒå˜é‡å¹¶é‡æ–°éƒ¨ç½²ï¼›\<br><br /><br />4. ç¡®ä¿å‰ç«¯ä»…ä½¿ç”¨`anon key`ï¼Œ`service_role key`ä»…ç”¨äºæœåŠ¡ç«¯ |



**é¢å¤–æç¤º**



è‹¥å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°å…¶ä»–æŠ¥é”™ï¼Œå¯å°†æŠ¥é”™ä¿¡æ¯å‘é€ç»™AIä»£ç åŠ©æ‰‹ï¼ˆå¦‚Claude Codeï¼‰è¿›è¡Œæ’æŸ¥å’Œä¿®æ”¹ï¼›è‹¥å¤šæ¬¡ä¿®æ”¹ä»æ— æ³•è§£å†³ï¼Œå»ºè®®è°ƒæ•´å¼€å‘æ–¹æ¡ˆåé‡æ–°è®©AIç¼–å†™ä»£ç ï¼Œé¿å…ä»£ç è¶Šæ”¹è¶Šä¹±ã€‚



***

### **5.5 æ¥å…¥ Cloudflare R2**



Cloudflare R2æ˜¯Cloudflareæ¨å‡ºçš„å…¼å®¹Amazon S3 APIçš„å¯¹è±¡å­˜å‚¨æœåŠ¡ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨AWSå®˜æ–¹çš„SDKï¼ˆå¦‚AWS SDK v3ï¼‰æ¥å®ç°å¯¹R2çš„å„ç§æ“ä½œï¼ŒåŒ…æ‹¬æ–‡ä»¶ä¸Šä¼ ã€ä¸‹è½½ã€ç®¡ç†ç­‰ï¼Œæ— éœ€é¢å¤–é€‚é…ä¸“å±SDKï¼Œå€ŸåŠ©S3æˆç†Ÿçš„ç”Ÿæ€å·¥å…·é™ä½å¼€å‘æˆæœ¬ã€‚



![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-9.png)



#### 01 å®‰è£…ä¾èµ–

ç”±äºR2å…¼å®¹S3åè®®ï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…AWS SDK v3ä¸­çš„S3å®¢æˆ·ç«¯åŒ…æ¥å®ç°ä¸R2çš„äº¤äº’ï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
npm install @aws-sdk/client-s3 @aws-sdk/lib-storage @aws-sdk/s3-request-presigner
# æˆ–ä½¿ç”¨yarn
yarn add @aws-sdk/client-s3 @aws-sdk/lib-storage @aws-sdk/s3-request-presigner
```

å…¶ä¸­`@aws-sdk/s3-request-presigner`ç”¨äºåç»­ç”Ÿæˆé¢„ç­¾åURLï¼Œæ»¡è¶³ä¸´æ—¶è®¿é—®éœ€æ±‚ã€‚



æ³¨æ„ï¼š`R2_ACCESS_KEY_ID`å’Œ`R2_SECRET_ACCESS_KEY`å¯åœ¨Cloudflare R2æ§åˆ¶å°çš„APIä»¤ç‰Œç®¡ç†é¡µé¢è·å–ã€‚

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-10.png)



#### 03 åˆ›å»ºä¸Šä¼ APIæ¥å£ï¼ˆsrc/app/api/upload/route.tsï¼‰

ä»¥Next.js 13+çš„App Routerä¸ºä¾‹ï¼Œåˆ›å»º`src/app/api/upload/route.ts`ä½œä¸ºæ–‡ä»¶ä¸Šä¼ çš„åç«¯æ¥å£ï¼Œå¤„ç†å‰ç«¯çš„æ–‡ä»¶ä¸Šä¼ è¯·æ±‚ï¼š

```typescript
import { NextRequest, NextResponse } from "next/server";
import { uploadToR2 } from "@/lib/r2";

export async function POST(request: NextRequest) {
  try {
    const formData = await request.formData();
    const file = formData.get("file") as File;
    if (!file) {
      return NextResponse.json({ error: "æœªä¸Šä¼ æ–‡ä»¶" }, { status: 400 });
    }

    // å°†æ–‡ä»¶è½¬æ¢ä¸ºBuffer
    const arrayBuffer = await file.arrayBuffer();
    const buffer = Buffer.from(arrayBuffer);

    // è°ƒç”¨R2ä¸Šä¼ å‡½æ•°ï¼Œæ›¿æ¢ä¸ºä½ çš„å®é™…å­˜å‚¨æ¡¶åç§°
    const result = await uploadToR2(
      "your-bucket-name",
      `${Date.now()}-${file.name}`, // ç”Ÿæˆå”¯ä¸€æ–‡ä»¶åé¿å…é‡å¤
      buffer,
      file.type
    );

    if (result.success) {
      return NextResponse.json({
        message: "æ–‡ä»¶ä¸Šä¼ æˆåŠŸ",
        fileKey: `${Date.now()}-${file.name}`,
      });
    } else {
      return NextResponse.json({ error: result.error }, { status: 500 });
    }
  } catch (error) {
    console.error("APIå¤„ç†é”™è¯¯:", error);
    return NextResponse.json(
      { error: "æœåŠ¡å™¨å†…éƒ¨é”™è¯¯" },
      { status: 500 }
    );
  }
}
```

è¯¥æ¥å£é€šè¿‡è¯»å–FormDataè·å–å‰ç«¯ä¸Šä¼ çš„æ–‡ä»¶ï¼Œè½¬æ¢ä¸ºBufferåè°ƒç”¨å°è£…å¥½çš„`uploadToR2`å‡½æ•°å®Œæˆä¸Šä¼ ï¼Œæœ€åè¿”å›ä¸Šä¼ ç»“æœã€‚



#### 04 å‰ç«¯è°ƒç”¨ä¸Šä¼ æ¥å£çš„ä»£ç ç¤ºä¾‹

å‰ç«¯å¯ä»¥é€šè¿‡åŸç”Ÿ`fetch`APIå‘é€æ–‡ä»¶ä¸Šä¼ è¯·æ±‚ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š

```javascript
// ç›‘å¬æ–‡ä»¶é€‰æ‹©äº‹ä»¶
const fileInput = document.getElementById("file-upload");
const uploadStatus = document.getElementById("upload-status");

fileInput.addEventListener("change", async (e) => {
  const file = (e.target as HTMLInputElement).files?.[0];
  if (!file) return;

  uploadStatus.textContent = "æ­£åœ¨ä¸Šä¼ ...";
  const formData = new FormData();
  formData.append("file", file);

  try {
    const response = await fetch("/api/upload", {
      method: "POST",
      body: formData,
    });

    const data = await response.json();
    if (response.ok) {
      uploadStatus.textContent = "æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼";
      console.log("æ–‡ä»¶å”¯ä¸€æ ‡è¯†:", data.fileKey);
      // å¯åœ¨æ­¤å¤„è°ƒç”¨é¢„ç­¾åURLæ¥å£è·å–è®¿é—®é“¾æ¥
    } else {
      uploadStatus.textContent = `ä¸Šä¼ å¤±è´¥: ${data.error}`;
    }
  } catch (error) {
    console.error("ä¸Šä¼ è¯·æ±‚å‡ºé”™:", error);
    uploadStatus.textContent = "ä¸Šä¼ è¯·æ±‚å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•";
  }
});
```

ä¹Ÿå¯ä»¥ä½¿ç”¨Axiosç­‰HTTPåº“å®ç°ç±»ä¼¼é€»è¾‘ï¼Œæ ¸å¿ƒæ˜¯å°†æ–‡ä»¶åŒ…è£…ä¸ºFormDataæ ¼å¼å‘é€åˆ°åç«¯APIã€‚



#### 05 é…ç½®R2æ–‡ä»¶å…¬å¼€è®¿é—®çš„ä¸¤ç§æ–¹æ¡ˆ

##### æ–¹æ¡ˆ1ï¼šè‡ªå®šä¹‰åŸŸåå…¬å¼€è®¿é—®

ä½ å¯ä»¥åœ¨Cloudflareä¸­ä¸ºR2å­˜å‚¨æ¡¶ç»‘å®šè‡ªå®šä¹‰åŸŸåï¼Œå®ç°æ°¸ä¹…å…¬å¼€è®¿é—®ï¼š

1. è¿›å…¥Cloudflare R2æ§åˆ¶å°ï¼Œé€‰æ‹©ç›®æ ‡å­˜å‚¨æ¡¶ï¼Œè¿›å…¥â€œè®¾ç½®â€é¡µé¢ï¼›

2. æ‰¾åˆ°â€œè‡ªå®šä¹‰åŸŸåâ€é€‰é¡¹ï¼Œè¾“å…¥ä½ çš„è‡ªå®šä¹‰åŸŸåï¼ˆå¦‚`r2.yourdomain.com`ï¼‰ï¼›

3) æŒ‰ç…§æç¤ºåœ¨Cloudflare DNSä¸­æ·»åŠ CNAMEè®°å½•ï¼Œå®ŒæˆåŸŸåè§£æï¼›

4) åœ¨å­˜å‚¨æ¡¶çš„â€œæƒé™â€è®¾ç½®ä¸­ï¼Œé…ç½®Bucket Policyå…è®¸åŒ¿åè¯»å–ï¼Œå³å¯è®©æ‰€æœ‰ç”¨æˆ·é€šè¿‡`https://r2.yourdomain.com/æ–‡ä»¶è·¯å¾„`ç›´æ¥è®¿é—®æ–‡ä»¶ã€‚



##### æ–¹æ¡ˆ2ï¼šé¢„ç­¾åURLä¸´æ—¶è®¿é—®

å¦‚æœä¸éœ€è¦æ–‡ä»¶æ°¸ä¹…å…¬å¼€ï¼Œå¯é€šè¿‡é¢„ç­¾åURLç”Ÿæˆä¸´æ—¶è®¿é—®é“¾æ¥ï¼Œä»…æˆæƒç‰¹å®šç”¨æˆ·åœ¨æŒ‡å®šæ—¶é—´å†…è®¿é—®ï¼Œå®‰å…¨æ€§æ›´é«˜ï¼š

åœ¨å‰ç«¯è·å–åˆ°ä¸Šä¼ æˆåŠŸçš„`fileKey`åï¼Œå¯è°ƒç”¨æ–°å¢çš„é¢„ç­¾åURLæ¥å£ï¼ˆéœ€è‡ªè¡Œåˆ›å»ºç±»ä¼¼`/api/presigned-url`çš„æ¥å£ï¼‰ï¼Œåç«¯è°ƒç”¨`getPresignedR2Url`å‡½æ•°ç”Ÿæˆé“¾æ¥è¿”å›ç»™å‰ç«¯ï¼Œç¤ºä¾‹æ¥å£ä»£ç ï¼š

```typescript
// src/app/api/presigned-url/route.ts
import { NextRequest, NextResponse } from "next/server";
import { getPresignedR2Url } from "@/lib/r2";

export async function GET(request: NextRequest) {
  const fileKey = request.nextUrl.searchParams.get("fileKey");
  if (!fileKey) {
    return NextResponse.json({ error: "ç¼ºå°‘fileKeyå‚æ•°" }, { status: 400 });
  }

  try {
    const signedUrl = await getPresignedR2Url("your-bucket-name", fileKey);
    return NextResponse.json({ signedUrl });
  } catch (error) {
    return NextResponse.json(
      { error: "ç”Ÿæˆé¢„ç­¾åURLå¤±è´¥" },
      { status: 500 }
    );
  }
}
```

å‰ç«¯æ‹¿åˆ°é¢„ç­¾åURLåï¼Œå³å¯åœ¨æœ‰æ•ˆæœŸå†…é€šè¿‡è¯¥URLç›´æ¥è®¿é—®æ–‡ä»¶ï¼Œæ— éœ€å­˜å‚¨æ¡¶å…¬å¼€ã€‚



#### 06 å¸¸è§æŠ¥é”™åŠè§£å†³æ–¹æ¡ˆ

| é”™è¯¯ç±»å‹         | å¯èƒ½åŸå›                                                   | è§£å†³æ–¹æ¡ˆ                                                                                                                            |
| ------------ | ----------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------- |
| AccessDenied | 1. R2è®¿é—®å¯†é’¥/ç§˜é’¥é…ç½®é”™è¯¯ï¼›2. å­˜å‚¨æ¡¶æƒé™ç­–ç•¥æœªå…è®¸å½“å‰å¯†é’¥çš„æ“ä½œï¼›3. æ–‡ä»¶è·¯å¾„æˆ–å­˜å‚¨æ¡¶åç§°é”™è¯¯ | 1. æ ¸å¯¹ç¯å¢ƒå˜é‡ä¸­çš„`R2_ACCESS_KEY_ID`å’Œ`R2_SECRET_ACCESS_KEY`æ˜¯å¦ä¸Cloudflareæ§åˆ¶å°ä¸€è‡´ï¼›2. åœ¨R2æ§åˆ¶å°è°ƒæ•´å­˜å‚¨æ¡¶æƒé™ç­–ç•¥ï¼Œç¡®ä¿å¯†é’¥æ‹¥æœ‰ä¸Šä¼ /è¯»å–æƒé™ï¼›3. æ£€æŸ¥ä»£ç ä¸­çš„å­˜å‚¨æ¡¶åç§°å’Œæ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡® |
| NoSuchBucket | 1. ä»£ç ä¸­æŒ‡å®šçš„å­˜å‚¨æ¡¶æœªåˆ›å»ºï¼›2. å­˜å‚¨æ¡¶åç§°æ‹¼å†™é”™è¯¯ï¼›3. R2å®¢æˆ·ç«¯åŒºåŸŸé…ç½®é”™è¯¯           | 1. ç™»å½•Cloudflare R2æ§åˆ¶å°ç¡®è®¤å­˜å‚¨æ¡¶å·²åˆ›å»ºï¼›2. æ ¸å¯¹ä»£ç ä¸­çš„å­˜å‚¨æ¡¶åç§°ä¸å®é™…ä¸€è‡´ï¼›3. æ£€æŸ¥R2å®¢æˆ·ç«¯é…ç½®çš„`region`å‚æ•°æ˜¯å¦ä¸º`auto`                                              |



***

### **5.6 æ¥å…¥ Supabase æ•°æ®åº“ï¼ˆä»£ç å®ç°ï¼‰**



å·²åœ¨Supabaseå¹³å°åˆ›å»ºé¡¹ç›®ï¼Œè·å–é¡¹ç›®çš„`Supabase URL`å’Œ`Supabase Anon Key`ï¼Œå¹¶åœ¨é¡¹ç›®ä¸­é…ç½®å¥½ç¯å¢ƒå˜é‡ã€‚

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-11.png)

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-12.png)



#### 01 `generations`è¡¨å»ºè¡¨SQLï¼ˆåŒ…å«RLSç­–ç•¥ï¼‰

SupabaseåŸºäºPostgreSQLï¼Œä»¥ä¸‹æ˜¯åŒ…å«è¡Œçº§å®‰å…¨ï¼ˆRLSï¼‰çš„å»ºè¡¨è¯­å¥ï¼Œç¡®ä¿ç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„AIç”Ÿæˆè®°å½•ï¼š

```sql
-- åˆ›å»ºgenerationsè¡¨ï¼Œå­˜å‚¨AIç”Ÿæˆçš„promptå’Œç»“æœ
CREATE TABLE generations (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(), -- è‡ªåŠ¨ç”Ÿæˆå”¯ä¸€ID
  prompt TEXT NOT NULL, -- AIç”Ÿæˆçš„æç¤ºè¯
  result TEXT NOT NULL, -- AIè¿”å›çš„ç»“æœ
  user_id UUID REFERENCES auth.users(id) NOT NULL, -- å…³è”Supabase Authç”¨æˆ·ID
  created_at TIMESTAMP WITH TIME ZONE DEFAULT TIME ZONE 'utc'::text NOT NULL -- è®°å½•åˆ›å»ºæ—¶é—´
);

-- å¯ç”¨è¡Œçº§å®‰å…¨ï¼ˆRLSï¼‰ï¼Œç¡®ä¿æ•°æ®è®¿é—®æƒé™æ§åˆ¶
ALTER TABLE generations ENABLE ROW LEVEL SECURITY;

-- ç­–ç•¥1ï¼šå…è®¸ç”¨æˆ·æŸ¥çœ‹è‡ªå·±çš„ç”Ÿæˆè®°å½•
CREATE POLICY "Users can view their own generations" ON generations
  FOR SELECT USING (auth.uid() = user_id);

-- ç­–ç•¥2ï¼šå…è®¸ç”¨æˆ·æ’å…¥è‡ªå·±çš„ç”Ÿæˆè®°å½•
CREATE POLICY "Users can insert their own generations" ON generations
  FOR INSERT WITH CHECK (auth.uid() = user_id);

-- ç­–ç•¥3ï¼šå…è®¸ç”¨æˆ·æ›´æ–°è‡ªå·±çš„ç”Ÿæˆè®°å½•
CREATE POLICY "Users can update their own generations" ON generations
  FOR UPDATE USING (auth.uid() = user_id);

-- ç­–ç•¥4ï¼šå…è®¸ç”¨æˆ·åˆ é™¤è‡ªå·±çš„ç”Ÿæˆè®°å½•
CREATE POLICY "Users can delete their own generations" ON generations
  FOR DELETE USING (auth.uid() = user_id);
```





***



#### 02 æŸ¥è¯¢æ•°æ®çš„ä»£ç ç¤ºä¾‹

é¦–å…ˆåˆå§‹åŒ–Supabaseå®¢æˆ·ç«¯ï¼Œç„¶åå®ç°æŸ¥è¯¢å½“å‰ç”¨æˆ·æ‰€æœ‰ç”Ÿæˆè®°å½•çš„é€»è¾‘ï¼š

```javascript
// 1. åˆå§‹åŒ–Supabaseå®¢æˆ·ç«¯ï¼ˆå¯å°è£…ä¸ºå•ç‹¬å·¥å…·æ–‡ä»¶ï¼‰
import { createClient } from '@supabase/supabase-js';

const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;
const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;
export const supabase = createClient(supabaseUrl, supabaseAnonKey);

// 2. æŸ¥è¯¢å½“å‰ç”¨æˆ·çš„ç”Ÿæˆè®°å½•
async function getGenerations(userId) {
  try {
    const { data, error } = await supabase
      .from('generations')
      .select('*') // æŸ¥è¯¢æ‰€æœ‰å­—æ®µ
      .eq('user_id', userId) // è¿‡æ»¤å½“å‰ç”¨æˆ·çš„æ•°æ®
      .order('created_at', { ascending: false }); // æŒ‰åˆ›å»ºæ—¶é—´å€’åºæ’åˆ—

    if (error) throw error;
    return data;
  } catch (error) {
    console.error('Error fetching generations:', error.message);
    return [];
  }
}
```





***



#### 03 æ’å…¥æ•°æ®çš„ä»£ç ç¤ºä¾‹

å®ç°å‘`generations`è¡¨æ’å…¥æ–°AIç”Ÿæˆè®°å½•çš„é€»è¾‘ï¼š

```javascript
// æ’å…¥æ–°çš„AIç”Ÿæˆè®°å½•
async function insertGeneration(prompt, result, userId) {
  try {
    const { data, error } = await supabase
      .from('generations')
      .insert([{ prompt, result, user_id: userId }]) // æ’å…¥å•æ¡è®°å½•ï¼ˆæ•°ç»„æ ¼å¼æ”¯æŒæ‰¹é‡æ’å…¥ï¼‰
      .select(); // æ’å…¥åè¿”å›æ’å…¥çš„å®Œæ•´æ•°æ®

    if (error) throw error;
    return data[0]; // è¿”å›æ’å…¥çš„ç¬¬ä¸€æ¡è®°å½•
  } catch (error) {
    console.error('Error inserting generation:', error.message);
    return null;
  }
}
```





***



#### 04 æ›´æ–°æ•°æ®çš„ä»£ç ç¤ºä¾‹

å®ç°æ›´æ–°æŒ‡å®šç”Ÿæˆè®°å½•çš„é€»è¾‘ï¼Œç¡®ä¿ä»…ç”¨æˆ·èƒ½æ›´æ–°è‡ªå·±çš„è®°å½•ï¼š

```javascript
// æ›´æ–°AIç”Ÿæˆè®°å½•çš„ç»“æœ
async function updateGeneration(generationId, newResult, userId) {
  try {
    const { data, error } = await supabase
      .from('generations')
      .update({ result: newResult }) // æ›´æ–°resultå­—æ®µ
      .eq('id', generationId) // åŒ¹é…è¦æ›´æ–°çš„è®°å½•ID
      .eq('user_id', userId) // ç¡®ä¿åªèƒ½æ›´æ–°è‡ªå·±çš„è®°å½•
      .select(); // æ›´æ–°åè¿”å›ä¿®æ”¹åçš„è®°å½•

    if (error) throw error;
    return data[0];
  } catch (error) {
    console.error('Error updating generation:', error.message);
    return null;
  }
}
```





***



#### 05 Reacté¡µé¢ä¸­ä½¿ç”¨çš„å®Œæ•´ç¤ºä¾‹

ä»¥ä¸‹æ˜¯é›†æˆSupabaseæŸ¥è¯¢ã€æ’å…¥åŠŸèƒ½çš„Reacté¡µé¢ï¼ŒåŒ…å«UIäº¤äº’å’Œæ•°æ®å±•ç¤ºï¼š

```javascript
import { useState, useEffect } from 'react';
import { supabase } from '../utils/supabaseClient'; // å¯¼å…¥åˆå§‹åŒ–å¥½çš„Supabaseå®¢æˆ·ç«¯

export default function GenerationsPage() {
  const [generations, setGenerations] = useState([]);
  const [prompt, setPrompt] = useState('');
  const [result, setResult] = useState('');
  const [userId, setUserId] = useState(null);

  // é¡µé¢åŠ è½½æ—¶è·å–å½“å‰ç”¨æˆ·IDå¹¶æ‹‰å–æ•°æ®ï¼ˆå®é™…é¡¹ç›®ä»Supabase Authè·å–çœŸå®ç”¨æˆ·ï¼‰
  useEffect(() => {
    // æ¨¡æ‹Ÿç”¨æˆ·ç™»å½•çŠ¶æ€ï¼Œå®é™…æ›¿æ¢ä¸ºsupabase.auth.getUser()è·å–ç”¨æˆ·ID
    const mockUserId = 'user-uuid-123456';
    setUserId(mockUserId);
    if (mockUserId) {
      fetchGenerations(mockUserId);
    }
  }, []);

  // è·å–ç”¨æˆ·çš„ç”Ÿæˆè®°å½•
  const fetchGenerations = async (userId) => {
    const data = await getGenerations(userId);
    setGenerations(data);
  };

  // æäº¤æ–°çš„ç”Ÿæˆè®°å½•
  const handleSubmit = async (e) => {
    e.preventDefault();
    if (!prompt || !result || !userId) return;
    
    const newGeneration = await insertGeneration(prompt, result, userId);
    if (newGeneration) {
      setGenerations([newGeneration, ...generations]); // æ’å…¥åæ›´æ–°åˆ—è¡¨
      setPrompt('');
      setResult('');
    }
  };

  // å¤ç”¨ä¹‹å‰å®šä¹‰çš„æŸ¥è¯¢ã€æ’å…¥å‡½æ•°
  async function getGenerations(userId) {
    try {
      const { data, error } = await supabase
        .from('generations')
        .select('*')
        .eq('user_id', userId)
        .order('created_at', { ascending: false });

      if (error) throw error;
      return data;
    } catch (error) {
      console.error('Error fetching generations:', error.message);
      return [];
    }
  }

  async function insertGeneration(prompt, result, userId) {
    try {
      const { data, error } = await supabase
        .from('generations')
        .insert([{ prompt, result, user_id: userId }])
        .select();

      if (error) throw error;
      return data[0];
    } catch (error) {
      console.error('Error inserting generation:', error.message);
      return null;
    }
  }

  return (
    <div style={{ maxWidth: '800px', margin: '0 auto', padding: '20px' }}>
      <h1>AIç”Ÿæˆè®°å½•ç®¡ç†</h1>
      
      {/* æäº¤æ–°è®°å½•è¡¨å• */}
      <form onSubmit={handleSubmit} style={{ marginBottom: '40px' }}>
        <div style={{ marginBottom: '15px' }}>
          <label style={{ display: 'block', marginBottom: '5px' }}>Prompt:</label>
          <textarea
            value={prompt}
            onChange={(e) => setPrompt(e.target.value)}
            required
            style={{ width: '100%', height: '100px', padding: '10px' }}
          />
        </div>
        <div style={{ marginBottom: '15px' }}>
          <label style={{ display: 'block', marginBottom: '5px' }}>AI Result:</label>
          <textarea
            value={result}
            onChange={(e) => setResult(e.target.value)}
            required
            style={{ width: '100%', height: '150px', padding: '10px' }}
          />
        </div>
        <button type="submit" style={{ padding: '10px 20px', cursor: 'pointer' }}>
          ä¿å­˜ç”Ÿæˆè®°å½•
        </button>
      </form>

      {/* å†å²è®°å½•åˆ—è¡¨ */}
      <h2>å†å²ç”Ÿæˆè®°å½•</h2>
      {generations.length === 0 ? (
        <p>æš‚æ— ç”Ÿæˆè®°å½•</p>
      ) : (
        <ul style={{ listStyle: 'none', padding: 0 }}>
          {generations.map((gen) => (
            <li key={gen.id} style={{ border: '1px solid #eee', padding: '15px', marginBottom: '10px', borderRadius: '5px' }}>
              <h3 style={{ marginTop: 0 }}>{gen.prompt.substring(0, 50)}...</h3>
              <p>{gen.result.substring(0, 100)}...</p>
              <small style={{ color: '#666' }}>
                åˆ›å»ºæ—¶é—´: {new Date(gen.created_at).toLocaleString()}
              </small>
            </li>
          ))}
        </ul>
      )}
    </div>
  );
}
```



#### 06 å¸¸è§æŠ¥é”™è¡¨æ ¼

| é”™è¯¯ä¿¡æ¯                                      | å¯èƒ½åŸå›                                                              | è§£å†³æ–¹æ³•                                                                                                                                                |
| ----------------------------------------- | ---------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------- |
| `permission denied for table generations` | 1. è¡¨å¯ç”¨äº†RLSä½†ç­–ç•¥é…ç½®é”™è¯¯ï¼Œç”¨æˆ·æ— è®¿é—®æƒé™ï¼›2. ä½¿ç”¨çš„APIå¯†é’¥æƒé™ä¸è¶³ï¼›3. è¡¨æœªèµ‹äºˆå…¬å…±è®¿é—®æƒé™          | 1. æ£€æŸ¥å¹¶ä¿®æ­£RLSç­–ç•¥ï¼Œç¡®ä¿ç”¨æˆ·èƒ½è®¿é—®è‡ªå·±çš„æ•°æ®ï¼›2. ç¡®è®¤ä½¿ç”¨çš„æ˜¯æ­£ç¡®çš„`Anon Key`ï¼Œæ•æ„Ÿæ“ä½œä½¿ç”¨`Service Role Key`ï¼›3. è‹¥ä¸éœ€è¦RLSï¼Œå¯æ‰§è¡Œ`ALTER TABLE generations DISABLE ROW LEVEL SECURITY;`å…³é—­RLS |
| `relation "generations" does not exist`   | 1. è¡¨åæ‹¼å†™é”™è¯¯ï¼ˆPostgreSQLåŒºåˆ†å¤§å°å†™ï¼‰ï¼›2. è¡¨æœªåœ¨Supabaseæ•°æ®åº“ä¸­åˆ›å»ºï¼›3. æœªæŒ‡å®šè¡¨æ‰€å±çš„Schema | 1. æ£€æŸ¥è¡¨åæ‹¼å†™ä¸æ•°æ®åº“ä¸­å®Œå…¨ä¸€è‡´ï¼›2. æ‰§è¡Œå»ºè¡¨SQLåˆ›å»º`generations`è¡¨ï¼›3. è‹¥è¡¨ä¸åœ¨`public`Schemaï¼ŒæŸ¥è¯¢æ—¶éœ€æŒ‡å®šï¼Œå¦‚`supabase.from('custom_schema.generations')`                            |



## Day 3ï¼šç¬¬äºŒåœºç›´æ’­

1. Subbase æ¥å…¥

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-13.png)

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-14.png)

* æ¥å…¥R2å­˜å‚¨

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-15.png)

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-16.png)

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-17.png)

https://developers.cloudflare.com/r2/api/s3/api/

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-18.png)



![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-19.png)

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-20.png)



![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-21.png)



* åŸŸåå•†ç›´æ¥è§£æï¼Œè‡ªå·±åšssl è®¤è¯ï¼Œhttps

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-22.png)

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-23.png)

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-24.png)

* Cloud flare åŸŸåæ‰˜ç®¡å’Œè§£æ

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-25.png)

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-26.png)



![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-27.png)

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-28.png)

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-29.png)

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-30.png)

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-31.png)

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-32.png)

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-33.png)

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-34.png)



## **å…­ã€æ¨¡å‹æ¥å…¥æ–‡æ¡£**



### **6.1 å¦‚ä½•æŸ¥çœ‹æ¥å£æ–‡æ¡£**



1. æ‰¾åˆ°æ¨¡å‹æä¾›å•†çš„å®˜æ–¹æ–‡æ¡£

2. æŸ¥çœ‹ API Reference æˆ– API Documentation

3) é‡ç‚¹å…³æ³¨ï¼š

   * è¯·æ±‚åœ°å€ï¼ˆEndpointï¼‰

   * è¯·æ±‚æ–¹æ³•ï¼ˆPOST/GETï¼‰

   * è¯·æ±‚å‚æ•°

   * è¿”å›æ ¼å¼

### **6.2 å¦‚ä½•è°ƒæ•´å‚æ•°**



å¸¸ç”¨å‚æ•°è¯´æ˜ï¼š



| å‚æ•°            | ä½œç”¨       | ç¤ºä¾‹å€¼                 |
| ------------- | -------- | ------------------- |
| `model`       | é€‰æ‹©æ¨¡å‹     | `gpt-4`ã€`claude-3`  |
| `prompt`      | è¾“å…¥æç¤ºè¯    | ä½ çš„éœ€æ±‚æè¿°              |
| `max_tokens`  | æœ€å¤§è¾“å‡ºé•¿åº¦   | `1000`ã€`2000`       |
| `temperature` | éšæœºæ€§ï¼ˆ0-1ï¼‰ | `0.7`ï¼ˆåˆ›æ„ï¼‰ã€`0.2`ï¼ˆç²¾ç¡®ï¼‰ |



### **6.3 å¸¸ç”¨æ¨¡å‹åˆ—è¡¨**



| æ¨¡å‹               | æä¾›å•†          | é€‚åˆåœºæ™¯    |
| ---------------- | ------------ | ------- |
| GPT-4            | OpenAI       | é€šç”¨ã€å¤æ‚ä»»åŠ¡ |
| Claude 3         | Anthropic    | é•¿æ–‡æœ¬ã€åˆ†æ  |
| Sora             | OpenAI       | è§†é¢‘ç”Ÿæˆ    |
| Stable Diffusion | Stability AI | å›¾ç‰‡ç”Ÿæˆ    |
| Midjourney       | Midjourney   | è‰ºæœ¯å›¾ç‰‡    |



***



## **ä¸ƒã€Toolify ä½¿ç”¨æŒ‡å—**



### **7.1 ä»€ä¹ˆæ˜¯ Toolify**



Toolifyï¼ˆhttps://toolify.aiï¼‰æ˜¯ä¸€ä¸ª AI å·¥å…·å¯¼èˆªç«™ï¼Œæ”¶å½•äº†å¤§é‡ AI äº§å“ï¼Œå¯ä»¥ç”¨æ¥ï¼š

* å‘ç°ç«å“

* åˆ†ææµé‡

* äº†è§£å¸‚åœºè¶‹åŠ¿

### **7.2 å¦‚ä½•æ‰¾ç«å“**



**æ“ä½œæ­¥éª¤ï¼š**

1. æ‰“å¼€ https://toolify.ai

2. åœ¨æœç´¢æ¡†è¾“å…¥ä½ çš„äº§å“å…³é”®è¯ï¼ˆå¦‚ `image generator`ï¼‰

3) æµè§ˆæœç´¢ç»“æœ

4) ç‚¹å‡»æ„Ÿå…´è¶£çš„äº§å“æŸ¥çœ‹è¯¦æƒ…

5. è®°å½•ç«å“ä¿¡æ¯

### **7.3 åˆ†æç«å“æ—¶å…³æ³¨ä»€ä¹ˆ**



| ç»´åº¦    | å…³æ³¨ç‚¹        |
| ----- | ---------- |
| æµé‡    | æœˆè®¿é—®é‡ã€æµé‡è¶‹åŠ¿  |
| åŠŸèƒ½    | æ ¸å¿ƒåŠŸèƒ½ã€å·®å¼‚åŒ–åŠŸèƒ½ |
| å®šä»·    | å…è´¹/ä»˜è´¹ã€ä»·æ ¼åŒºé—´ |
| UI/UX | ç•Œé¢è®¾è®¡ã€ç”¨æˆ·ä½“éªŒ  |
| SEO   | å…³é”®è¯ã€é¡µé¢ç»“æ„   |



***



## **å…«ã€ç«å“æ‹†è§£æ¨¡æ¿**



### **8.1 ç«å“åŸºç¡€ä¿¡æ¯**



| å­—æ®µ   | å†…å®¹ |
| ---- | -- |
| ç«å“åç§° |    |
| ç½‘å€   |    |
| æœˆæµé‡  |    |
| ä¸»è¦åŠŸèƒ½ |    |
| å®šä»·æ¨¡å¼ |    |



### **8.2 åŠŸèƒ½æ‹†è§£è¡¨**



| åŠŸèƒ½åç§° | å¿…é¡»æœ‰ | å¯ä»¥æ²¡æœ‰ | å¤‡æ³¨ |
| ---- | --- | ---- | -- |
| ç”¨æˆ·ç™»å½• | â˜   | â˜    |    |
| å›¾ç‰‡ç”Ÿæˆ | â˜   | â˜    |    |
| è§†é¢‘ç”Ÿæˆ | â˜   | â˜    |    |
| å†å²è®°å½• | â˜   | â˜    |    |
| ä¸‹è½½åŠŸèƒ½ | â˜   | â˜    |    |
| åˆ†äº«åŠŸèƒ½ | â˜   | â˜    |    |
| ä»˜è´¹åŠŸèƒ½ | â˜   | â˜    |    |
| ...  | â˜   | â˜    |    |



### **8.3 UI/UX åˆ†æ**



| ç»´åº¦   | è§‚å¯Ÿç‚¹        | ç«å“åšæ³• | æˆ‘çš„æ”¹è¿› |
| ---- | ---------- | ---- | ---- |
| é¦–é¡µ   | ç¬¬ä¸€çœ¼çœ‹åˆ°ä»€ä¹ˆ    |      |      |
| å¯¼èˆª   | èœå•ç»“æ„       |      |      |
| æ“ä½œæµç¨‹ | å®Œæˆæ ¸å¿ƒä»»åŠ¡éœ€è¦å‡ æ­¥ |      |      |
| è§†è§‰é£æ ¼ | é…è‰²ã€å­—ä½“ã€é—´è·   |      |      |



***



## Day6 ç›´æ’­ï¼š

### 1. Vercel éƒ¨ç½²

1. åˆ›å»ºvercel é¡¹ç›®

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-35.png)

* ç»‘å®šgithub ä»“åº“åœ°å€ï¼Œ è¾“å…¥æˆ–è€…import&#x20;

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-36.png)

* å¤åˆ¶ç¯å¢ƒå˜é‡ï¼Œ å¤åˆ¶.env ä¸­çš„å˜é‡ ç²˜è´´åˆ°è¿™é‡Œ

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-37.png)

* å¼€å§‹éƒ¨ç½²

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-38.png)

* å¦‚æœé‡åˆ°ç¼–è¯‘é—®é¢˜ï¼Œå¤åˆ¶é”™è¯¯ç»™AIä¿®æ”¹

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-39.png)

### 2. ç»‘å®šè‡ªå®šä¹‰åŸŸå

1. è¿›å…¥é¡¹ç›®ä¸»é¡µï¼Œç‚¹å‡»æ·»åŠ åŸŸå

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-40.png)

* æ·»åŠ åŸŸå

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-41.png)

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-42.png)

* CF é…ç½®è§£æ

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-43.png)

![](images/ä¸€å‘¨å¤åˆ»ä¸€ä¸ªäº§å“ï¼ˆå›¾ç‰‡è§†é¢‘ç«™ï¼‰ä¸¨æ“ä½œæ‰‹å†Œ-image-44.png)

## **ä¹ã€Vercel éƒ¨ç½² SOP**



### **9.1 å°†ä»£ç æäº¤åˆ° GitHub**



```bash
# æ·»åŠ æ‰€æœ‰æ–‡ä»¶
git add .

# æäº¤
git commit -m "Ready for deployment"

# æ¨é€åˆ° GitHub
git push origin main
```



### **9.2 åœ¨ Vercel å¯¼å…¥é¡¹ç›®**

**æ“ä½œæ­¥éª¤ï¼š**

1. æ‰“å¼€ https://vercel.com

2. ç‚¹å‡»ã€ŒAdd New...ã€â†’ã€ŒProjectã€

3) é€‰æ‹©ä½ çš„ GitHub ä»“åº“

4) ç‚¹å‡»ã€ŒImportã€



### **9.3 é…ç½®ç¯å¢ƒå˜é‡**

åœ¨éƒ¨ç½²é…ç½®é¡µé¢ï¼š

1. å±•å¼€ã€ŒEnvironment Variablesã€

2. é€ä¸ªæ·»åŠ  .env.local ä¸­çš„å˜é‡

3) ç¡®è®¤æ‰€æœ‰å˜é‡éƒ½å·²æ·»åŠ 



### **9.4 éƒ¨ç½²**

1. ç‚¹å‡»ã€ŒDeployã€

2. ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆé€šå¸¸ 1-2 åˆ†é’Ÿï¼‰

3) éƒ¨ç½²æˆåŠŸåï¼Œè·å¾— `.vercel.app` åŸŸå



### **9.5 éƒ¨ç½²æ£€æŸ¥æ¸…å•**

| æ£€æŸ¥é¡¹                 | çŠ¶æ€ |
| ------------------- | -- |
| â˜ ä»£ç å·²æäº¤åˆ° GitHub     |    |
| â˜ Vercel å·²å¯¼å…¥é¡¹ç›®      |    |
| â˜ ç¯å¢ƒå˜é‡å·²é…ç½®           |    |
| â˜ éƒ¨ç½²æˆåŠŸ              |    |
| â˜ .vercel.app åŸŸåå¯è®¿é—® |    |



***



## **åã€CF åŸŸåè§£ææŒ‡å—**



### **10.1 åœ¨ Cloudflare æ·»åŠ åŸŸå**



**æ“ä½œæ­¥éª¤ï¼š**

1. ç™»å½• https://cloudflare.com

2. ç‚¹å‡»ã€ŒAdd a Siteã€

3) è¾“å…¥ä½ çš„åŸŸå

4) é€‰æ‹©å…è´¹è®¡åˆ’

5. Cloudflare ä¼šæä¾› 2 ä¸ª DNS æœåŠ¡å™¨åœ°å€

### **10.2 ä¿®æ”¹åŸŸå DNS æœåŠ¡å™¨**



åœ¨ä½ çš„åŸŸåæ³¨å†Œå•†å¤„ï¼š

1. æ‰¾åˆ°åŸŸåç®¡ç† â†’ DNS è®¾ç½®

2. å°† DNS æœåŠ¡å™¨æ”¹ä¸º Cloudflare æä¾›çš„åœ°å€

3) ç­‰å¾…ç”Ÿæ•ˆï¼ˆé€šå¸¸å‡ åˆ†é’Ÿåˆ°å‡ å°æ—¶ï¼‰

### **10.3 é…ç½® DNS è§£æ**



å›åˆ° Cloudflareï¼Œæ·»åŠ ä»¥ä¸‹è®°å½•ï¼š



| ç±»å‹    | åç§°  | å†…å®¹                   | ä»£ç†çŠ¶æ€  |
| ----- | --- | -------------------- | ----- |
| CNAME | @   | cname.vercel-dns.com | ä»… DNS |
| CNAME | www | cname.vercel-dns.com | ä»… DNS |



### **10.4 åœ¨ Vercel ç»‘å®šåŸŸå**



1. è¿›å…¥ Vercel é¡¹ç›® â†’ Settings â†’ Domains

2. æ·»åŠ ä½ çš„åŸŸå

3) ç­‰å¾…éªŒè¯é€šè¿‡

### **10.5 åŸŸåè§£ææ£€æŸ¥æ¸…å•**



| æ£€æŸ¥é¡¹                 |
| ------------------- |
| â˜ åŸŸåå·²æ·»åŠ åˆ° Cloudflare |
| â˜ DNS æœåŠ¡å™¨å·²ä¿®æ”¹        |
| â˜ CNAME è®°å½•å·²æ·»åŠ        |
| â˜ Vercel å·²ç»‘å®šåŸŸå      |
| â˜ è‡ªå®šä¹‰åŸŸåå¯è®¿é—®          |



***



## **åä¸€ã€ä¸Šçº¿æ£€æŸ¥æ¸…å•**



### **11.1 åŠŸèƒ½æµ‹è¯•**



| æ£€æŸ¥é¡¹               |
| ----------------- |
| â˜ é¦–é¡µèƒ½æ­£å¸¸è®¿é—®         |
| â˜ ç”¨æˆ·ç™»å½•åŠŸèƒ½æ­£å¸¸        |
| â˜ æ ¸å¿ƒåŠŸèƒ½ï¼ˆå›¾ç‰‡/è§†é¢‘ç”Ÿæˆï¼‰æ­£å¸¸ |
| â˜ æ‰€æœ‰é¡µé¢é“¾æ¥å¯ç‚¹å‡»       |
| â˜ å›¾ç‰‡å…¨éƒ¨åŠ è½½          |



### **11.2 ç§»åŠ¨ç«¯é€‚é…**



| æ£€æŸ¥é¡¹        |
| ---------- |
| â˜ æ‰‹æœºè®¿é—®æ˜¾ç¤ºæ­£å¸¸ |
| â˜ æŒ‰é’®å¯ç‚¹å‡»    |
| â˜ æ–‡å­—å¯è¯»     |
| â˜ å¸ƒå±€ä¸é”™ä¹±    |



### **11.3 æ€§èƒ½æ£€æŸ¥**



| æ£€æŸ¥é¡¹               |
| ----------------- |
| â˜ é¡µé¢åŠ è½½é€Ÿåº¦å¯æ¥å—ï¼ˆ< 3ç§’ï¼‰ |
| â˜ å›¾ç‰‡å·²å‹ç¼©           |
| â˜ æ— æ§åˆ¶å°æŠ¥é”™          |



### **11.4 ç¯å¢ƒå˜é‡ç¡®è®¤**



| æ£€æŸ¥é¡¹                  |
| -------------------- |
| â˜ æ‰€æœ‰ç¯å¢ƒå˜é‡å·²åœ¨ Vercel é…ç½® |
| â˜ API å¯†é’¥æœ‰æ•ˆ           |
| â˜ æ•°æ®åº“è¿æ¥æ­£å¸¸            |



### **11.5 æœ€ç»ˆç¡®è®¤**



| æ£€æŸ¥é¡¹              |
| ---------------- |
| â˜ è‡ªå®šä¹‰åŸŸåå¯è®¿é—®       |
| â˜ HTTPS æ­£å¸¸ï¼ˆæœ‰é”å›¾æ ‡ï¼‰ |
| â˜ æ ¸å¿ƒåŠŸèƒ½å…¨éƒ¨å¯ç”¨       |



**å…¨éƒ¨é€šè¿‡åï¼Œå³å¯æäº¤ä½œä¸šï¼**



åœç•™æ—¶é•¿  äº§å“æœ‰æ²¡æœ‰æ»¡è¶³ç”¨æˆ·éœ€æ±‚ &#x20;

&#x20;è·³å‡ºç‡  &#x20;

